<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>JOURNIVERSE | DIARY</title>
    <link rel="stylesheet" href="/css/diary/diary-home.css">
    
    <!-- âœ… TUI Calendar CSS -->
	<link rel="stylesheet" href="https://uicdn.toast.com/tui-calendar/latest/tui-calendar.min.css">

	<!-- âœ… í•„ìˆ˜ JS ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
	<script src="https://uicdn.toast.com/tui.code-snippet/latest/tui-code-snippet.min.js"></script>
	<script src="https://uicdn.toast.com/tui-calendar/latest/tui-calendar.min.js"></script>
</head>
<body>

    <div class="container">
        <div class="main-content">
            <h1>I decide my own feelings.<br>Today, it's going to be <span class="highlight">happiness</span>.</h1>
            <p class="quote">â€œë‚´ ê¸°ë¶„ì€ ë‚´ê°€ ì •í•´. ì˜¤ëŠ˜ì€ í–‰ë³µìœ¼ë¡œ í• ë˜â€ - ì´ìƒí•œ ë‚˜ë¼ì˜ ì•¨ë¦¬ìŠ¤</p>

            <div class="button-group">
                <a href="/diary/insert" class="btn write-journal">Write Journal</a>
                <a href="/diary/list" class="btn read-journal">Read Journal</a>
            </div>
        </div>

        <!-- ğŸ“Œ ìº˜ë¦°ë” ì»¨í…Œì´ë„ˆ -->
        <div class="calendar-wrapper">
            <div class="calendar-header">
                <select id="yearSelect"></select>
                <select id="monthSelect"></select>
            </div>
            <div id="calendar"></div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            console.log("DOMContentLoaded ì‹¤í–‰ë¨");

            if (typeof tui.Calendar === 'undefined') {
                console.error("ğŸš¨ TUI Calendar ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë¡œë“œë˜ì§€ ì•ŠìŒ!");
                return;
            }

            // âœ… ë…„ë„ì™€ ì›” ì„ íƒì„ ìœ„í•œ select ë°•ìŠ¤ ì„¤ì •
            const yearSelect = document.getElementById("yearSelect");
            const monthSelect = document.getElementById("monthSelect");

            let currentYear = new Date().getFullYear();
            let currentMonth = new Date().getMonth() + 1;

            for (let y = 2020; y <= 2030; y++) {
                let option = document.createElement("option");
                option.value = y;
                option.textContent = y + " ë…„";
                if (y === currentYear) option.selected = true;
                yearSelect.appendChild(option);
            }

            for (let m = 1; m <= 12; m++) {
                let option = document.createElement("option");
                option.value = m;
                option.textContent = m + " ì›”";
                if (m === currentMonth) option.selected = true;
                monthSelect.appendChild(option);
            }

            var cal = new tui.Calendar("#calendar", {
                defaultView: "month",
                useCreationPopup: true,
                useDetailPopup: true,
            });

            // ğŸ“Œ ë…„ë„/ì›” ì„ íƒ ì‹œ ë‹¬ë ¥ ì—…ë°ì´íŠ¸
            function setMonthYear() {
                let selectedYear = yearSelect.value;
                let selectedMonth = monthSelect.value;
                cal.setDate(new Date(selectedYear, selectedMonth - 1, 1));
            }

            yearSelect.addEventListener("change", setMonthYear);
            monthSelect.addEventListener("change", setMonthYear);

            cal.render();
        });
    </script>

</body>
</html>
